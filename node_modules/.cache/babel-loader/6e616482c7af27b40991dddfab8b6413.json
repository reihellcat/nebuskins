{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\src\\\\App.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ConfigProvider from '@vkontakte/vkui/dist/components/ConfigProvider/ConfigProvider';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Home from './panels/Home';\nimport Second from './panels/second.js';\nimport TabbarMod from './panels/tabbar.js';\n\nvar App = function App() {\n  var _useState = useState(\"tabbar\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      activePanel = _useState2[0],\n      setActivePanel = _useState2[1];\n\n  var _useState3 = useState(\"bright_light\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      scheme = _useState4[0],\n      SetScheme = _useState4[1];\n\n  var _useState5 = useState(['home']),\n      _useState6 = _slicedToArray(_useState5, 2),\n      history = _useState6[0],\n      setHistory = _useState6[1];\n\n  function goToPage(name) {\n    window.history.pushState({\n      panel: name\n    }, name);\n    setActivePanel(name);\n    history.push(name);\n  }\n\n  ;\n\n  function goBack() {\n    if (history.length === 1) {\n      connect.send(\"VKWebAppClose\");\n    } else if (history.length > 1) {\n      history.pop();\n      setActivePanel(history[history.length - 1]);\n    }\n  }\n\n  function UpdateTheme() {\n    if (scheme === \"bright_light\" || scheme === \"client_light\") {\n      SetScheme('space_gray');\n      connect.send(\"VKWebAppSetViewSettings\", {\n        \"status_bar_style\": \"light\",\n        \"action_bar_color\": \"#000\"\n      });\n    } else if (scheme === \"space_gray\" || scheme === \"client_dark\") {\n      SetScheme('bright_light');\n      connect.send(\"VKWebAppSetViewSettings\", {\n        \"status_bar_style\": \"dark\",\n        \"action_bar_color\": \"#fff\"\n      });\n    }\n  }\n\n  useEffect(function () {\n    window.addEventListener('popstate', function () {\n      return goBack();\n    }); //  Добавляем обработчик события изменения истории для работы аппаратных кнопок.\n\n    connect.subscribe(function (_ref) {\n      var _ref$detail = _ref.detail,\n          type = _ref$detail.type,\n          data = _ref$detail.data;\n\n      if (type === 'VKWebAppUpdateConfig') {\n        SetScheme(data.scheme);\n      }\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(ConfigProvider, {\n    isWebView: true,\n    scheme: scheme,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(View, {\n    activePanel: activePanel,\n    onSwipeBack: goBack,\n    history: history,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(TabbarMod, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(Home, {\n    id: \"home\",\n    goToPage: goToPage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Second, {\n    id: \"second\",\n    UpdateTheme: UpdateTheme,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Павел/Desktop/vkapp/nebuskins/src/App.js"],"names":["React","useState","useEffect","connect","View","ConfigProvider","Home","Second","TabbarMod","App","activePanel","setActivePanel","scheme","SetScheme","history","setHistory","goToPage","name","window","pushState","panel","push","goBack","length","send","pop","UpdateTheme","addEventListener","subscribe","detail","type","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport View from '@vkontakte/vkui/dist/components/View/View';\r\nimport ConfigProvider from '@vkontakte/vkui/dist/components/ConfigProvider/ConfigProvider';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nimport Home from './panels/Home';\r\nimport Second from './panels/second.js';\r\nimport TabbarMod from './panels/tabbar.js';\r\n\r\nconst App = () => {\r\n\tconst [activePanel, setActivePanel] = useState(\"tabbar\");\r\n\tconst [scheme, SetScheme] = useState(\"bright_light\")\r\n\tconst [history, setHistory] = useState(['home'])\r\n\t\r\n\tfunction goToPage(name) {\r\n\t\twindow.history.pushState({panel: name}, name)\r\n\t\tsetActivePanel(name);\r\n\t\thistory.push(name)\r\n\t};\r\n\r\n\tfunction goBack() {\r\n  \t\tif(history.length === 1){\r\n    \t\tconnect.send(\"VKWebAppClose\");\r\n  \t\t} else if(history.length > 1){\r\n\t\t\thistory.pop()\r\n\t\t\tsetActivePanel(history[history.length - 1])\r\n  \t\t}\r\n\t}\r\n\r\n\tfunction UpdateTheme() {\r\n\t\t\tif(scheme === \"bright_light\" || scheme === \"client_light\") {\r\n\t\t\t\tSetScheme('space_gray');\r\n\t\t\t\tconnect.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#000\"});\r\n\t\t\t}\r\n\t\t\telse if(scheme === \"space_gray\" || scheme === \"client_dark\"){\r\n\t\t\t\tSetScheme('bright_light');\r\n\t\t\t\tconnect.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#fff\"});\r\n\t\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n        window.addEventListener('popstate', () => goBack()); //  Добавляем обработчик события изменения истории для работы аппаратных кнопок.\r\n\t\tconnect.subscribe(({ detail: { type, data }}) => {\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tSetScheme(data.scheme)\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\t \r\n\treturn (\r\n\t\t<ConfigProvider isWebView={true} scheme={scheme}>\r\n\t\t\t<View \r\n\t\t\tactivePanel={activePanel}\r\n\t\t\tonSwipeBack={goBack}\r\n            history={history}>\r\n\t\t\t    <TabbarMod/>\r\n\t\t\t\t<Home id='home' goToPage={goToPage}/>\r\n\t\t\t\t<Second id='second' UpdateTheme={UpdateTheme}/>\r\n\t\t\t</View>\r\n\t\t</ConfigProvider>\r\n\t);\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}