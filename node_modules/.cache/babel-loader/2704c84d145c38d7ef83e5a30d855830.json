{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u041F\\u0430\\u0432\\u0435\\u043B\\\\Desktop\\\\vkapp\\\\nebuskins\\\\src\\\\App.js\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ConfigProvider from '@vkontakte/vkui/dist/components/ConfigProvider/ConfigProvider';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { Panel, PanelHeader, Tabbar, TabbarItem, Epic, Button } from '@vkontakte/vkui';\nimport Icon28AddOutline from '@vkontakte/icons/dist/28/add_outline';\nimport Icon28NewsfeedOutline from '@vkontakte/icons/dist/28/newsfeed_outline';\nimport Icon28SettingsOutline from '@vkontakte/icons/dist/28/settings_outline';\n\nvar App = /*#__PURE__*/function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props)); //     this.state = {\n    //         history: ['feed'], // Заносим начальную панель в массив историй.\n    //         scheme: \"bright_light\" // Если не придет тема - ставим эту по умолчанию.\n    //     };\n    // }\n\n    _this.goBack = function () {\n      // Функция, которая переносит нас на панель назад.\n      var history = _this.state.history;\n\n      if (history.length === 1) {\n        // Если в массиве одно значение:\n        connect.send(\"VKWebAppClose\"); // отправляем connect на закрытие сервиса.\n      } else if (history.length > 1) {\n        // Если в массиве больше одного значения:\n        history.pop(); // удаляем последний элемент в массиве.\n\n        _this.setState({\n          history: history,\n          activePanel: history[history.length - 1]\n        }); // Изменяем массив с иторией и меняем активную панель.\n\n      }\n    };\n\n    _this.state = {\n      activeStory: 'feed',\n      scheme: \"bright_light\"\n    };\n    _this.onStoryChange = _this.onStoryChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"onStoryChange\",\n    value: function onStoryChange(e) {\n      this.setState({\n        activeStory: e.currentTarget.dataset.story\n      });\n    }\n  }, {\n    key: \"goToPage\",\n    value: function goToPage(name) {\n      // Функция, которая переносит нас на следущую панель \n      window.history.pushState({\n        panel: name\n      }, name); //  Создаём новую запись в истории браузера\n\n      this.setState({\n        activePanel: name,\n        // Меняем активную панель на second\n        history: [].concat(_toConsumableArray(this.state.history), [name]) // Добавляем панель в историю\n\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      connect.subscribe(function (_ref) {\n        var _ref$detail = _ref.detail,\n            type = _ref$detail.type,\n            data = _ref$detail.data;\n\n        // Подписываемся на события.\n        if (type === 'VKWebAppUpdateConfig') {\n          // Получаем тему клиента.\n          _this2.setState({\n            scheme: data.scheme\n          });\n        }\n      });\n      window.addEventListener('popstate', function () {\n        return _this2.goBack();\n      }); //  Добавляем обработчик события изменения истории для работы аппаратных кнопок.\n    }\n  }, {\n    key: \"UpdateTheme\",\n    value: function UpdateTheme() {\n      if (this.state.scheme === \"bright_light\" || this.state.scheme === \"client_light\") {\n        // Если в стейте эти темы: \n        this.setState({\n          scheme: 'space_gray'\n        }); // меняем тему на альтернативную.\n\n        connect.send(\"VKWebAppSetViewSettings\", {\n          \"status_bar_style\": \"light\",\n          \"action_bar_color\": \"#000\"\n        }); // Устанавливаем цвет статус бара на белый и экшен бара на черный.\n      } else if (this.state.scheme === \"space_gray\" || this.state.scheme === \"client_dark\") {\n        this.setState({\n          scheme: 'bright_light'\n        }); // меняем тему на альтернативную.\n\n        connect.send(\"VKWebAppSetViewSettings\", {\n          \"status_bar_style\": \"dark\",\n          \"action_bar_color\": \"#fff\"\n        }); // Устанавливаем цвет статус бара на черный и экшен бара на белый.\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(ConfigProvider, {\n        isWebView: true,\n        scheme: this.state.scheme,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(View, {\n        activePanel: this.state.activePanel,\n        history: this.state.history,\n        onSwipeBack: this.goBack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Epic, {\n        tabbar: /*#__PURE__*/React.createElement(Tabbar, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(TabbarItem, {\n          onClick: this.onStoryChange,\n          selected: this.state.activeStory === 'feed',\n          \"data-story\": \"feed\",\n          text: \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Icon28NewsfeedOutline, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 12\n          }\n        })), /*#__PURE__*/React.createElement(TabbarItem, {\n          onClick: this.onStoryChange,\n          selected: this.state.activeStory === 'add_skin',\n          \"data-story\": \"add_skin\",\n          text: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u043A\\u0438\\u043D\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Icon28AddOutline, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 12\n          }\n        })), /*#__PURE__*/React.createElement(TabbarItem, {\n          onClick: this.onStoryChange,\n          selected: this.state.activeStory === 'settings',\n          \"data-story\": \"settings\",\n          text: \"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Icon28SettingsOutline, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 12\n          }\n        }))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(View, {\n        id: \"feed\",\n        activePanel: \"feed\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Panel, {\n        id: \"feed\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(PanelHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }\n      }, \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"), /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          return _this3.props.UpdateTheme();\n        },\n        size: \"xl\",\n        mode: \"secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }, \"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443 \\u043D\\u0430 \\u0430\\u043B\\u044C\\u0442\\u0435\\u0440\\u043D\\u0430\\u0442\\u0438\\u0432\\u043D\\u0443\\u044E\"))), /*#__PURE__*/React.createElement(View, {\n        id: \"add_skin\",\n        activePanel: \"add_skin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Panel, {\n        id: \"add_skin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(PanelHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u043A\\u0438\\u043D\"))), /*#__PURE__*/React.createElement(View, {\n        id: \"settings\",\n        activePanel: \"settings\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Panel, {\n        id: \"settings\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(PanelHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      }, \"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\"), /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          return _this3.UpdateTheme();\n        },\n        size: \"xl\",\n        mode: \"secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }\n      }, \"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443 \\u043D\\u0430 \\u0430\\u043B\\u044C\\u0442\\u0435\\u0440\\u043D\\u0430\\u0442\\u0438\\u0432\\u043D\\u0443\\u044E\"))))));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Павел/Desktop/vkapp/nebuskins/src/App.js"],"names":["React","useState","useEffect","useCallback","ReactDOM","connect","View","ConfigProvider","Panel","PanelHeader","Tabbar","TabbarItem","Epic","Button","Icon28AddOutline","Icon28NewsfeedOutline","Icon28SettingsOutline","App","props","goBack","history","state","length","send","pop","setState","activePanel","activeStory","scheme","onStoryChange","bind","e","currentTarget","dataset","story","name","window","pushState","panel","subscribe","detail","type","data","addEventListener","UpdateTheme","Component"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport View from '@vkontakte/vkui/dist/components/View/View';\r\nimport ConfigProvider from '@vkontakte/vkui/dist/components/ConfigProvider/ConfigProvider';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport { Panel, PanelHeader, Tabbar, TabbarItem, Epic, Button } from '@vkontakte/vkui';\r\nimport Icon28AddOutline from '@vkontakte/icons/dist/28/add_outline';\r\nimport Icon28NewsfeedOutline from '@vkontakte/icons/dist/28/newsfeed_outline';\r\nimport Icon28SettingsOutline from '@vkontakte/icons/dist/28/settings_outline';\r\n\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n      super(props);\r\n  //     this.state = {\r\n  //         history: ['feed'], // Заносим начальную панель в массив историй.\r\n  //         scheme: \"bright_light\" // Если не придет тема - ставим эту по умолчанию.\r\n  //     };\r\n  // }\r\n  this.state = {\r\n    activeStory: 'feed',\r\n    scheme: \"bright_light\"\r\n  };\r\n  this.onStoryChange = this.onStoryChange.bind(this);\r\n}\r\n\r\nonStoryChange (e) {\r\n  this.setState({ activeStory: e.currentTarget.dataset.story })\r\n}\r\n\r\n  goToPage(name) { // Функция, которая переносит нас на следущую панель \r\n      window.history.pushState({panel: name}, name); //  Создаём новую запись в истории браузера\r\n      this.setState({\r\n          activePanel: name,  // Меняем активную панель на second\r\n          history: [...this.state.history, name] // Добавляем панель в историю\r\n      })\r\n  }\r\n\r\n  goBack = () => { // Функция, которая переносит нас на панель назад.\r\n      const history = this.state.history;\r\n      if(history.length === 1) { // Если в массиве одно значение:\r\n          connect.send(\"VKWebAppClose\"); // отправляем connect на закрытие сервиса.\r\n      } else if (history.length > 1) { // Если в массиве больше одного значения:\r\n          history.pop() // удаляем последний элемент в массиве.\r\n          this.setState({history: history, activePanel: history[history.length - 1]}) // Изменяем массив с иторией и меняем активную панель.\r\n      }\r\n  }\r\n\r\n  componentDidMount() {\r\n      connect.subscribe(({ detail: { type, data }}) => { // Подписываемся на события.\r\n    if (type === 'VKWebAppUpdateConfig') { // Получаем тему клиента.\r\n              this.setState({scheme: data.scheme})\r\n          }\r\n      })\r\n      window.addEventListener('popstate', () => this.goBack()); //  Добавляем обработчик события изменения истории для работы аппаратных кнопок.\r\n  }\r\n\r\n  UpdateTheme() {\r\n      if(this.state.scheme === \"bright_light\" || this.state.scheme === \"client_light\"){ // Если в стейте эти темы: \r\n          this.setState({scheme: 'space_gray'}); // меняем тему на альтернативную.\r\n          connect.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#000\"}); // Устанавливаем цвет статус бара на белый и экшен бара на черный.\r\n} else if(this.state.scheme === \"space_gray\" || this.state.scheme === \"client_dark\") {\r\n          this.setState({scheme: 'bright_light'}); // меняем тему на альтернативную.\r\n          connect.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#fff\"}); // Устанавливаем цвет статус бара на черный и экшен бара на белый.\r\n      }\r\n   }\r\n\r\n   render() {\r\n\r\n    return (\r\n      <ConfigProvider isWebView={true} scheme={this.state.scheme}> \r\n        <View activePanel={this.state.activePanel}\r\n                 history={this.state.history}\r\n                 onSwipeBack={this.goBack}>\r\n        <Epic tabbar={\r\n        <Tabbar>\r\n          <TabbarItem\r\n            onClick={this.onStoryChange}\r\n            selected={this.state.activeStory === 'feed'}\r\n            data-story=\"feed\"\r\n            text=\"Главная\"\r\n          ><Icon28NewsfeedOutline /></TabbarItem>\r\n          <TabbarItem\r\n            onClick={this.onStoryChange}\r\n            selected={this.state.activeStory === 'add_skin'}\r\n            data-story=\"add_skin\"\r\n            text=\"Добавить скин\"\r\n          ><Icon28AddOutline /></TabbarItem>\r\n          <TabbarItem\r\n            onClick={this.onStoryChange}\r\n            selected={this.state.activeStory === 'settings'}\r\n            data-story=\"settings\"\r\n            text=\"Настройки\"\r\n          ><Icon28SettingsOutline /></TabbarItem>\r\n        </Tabbar>\r\n      }>\r\n        <View id=\"feed\" activePanel=\"feed\">\r\n          <Panel id=\"feed\">\r\n            <PanelHeader>Главная</PanelHeader>\r\n            <Button onClick={() => this.props.UpdateTheme()} size=\"xl\" mode=\"secondary\">Сменить тему на альтернативную</Button>\r\n          </Panel>\r\n        </View>\r\n        <View id=\"add_skin\" activePanel=\"add_skin\">\r\n          <Panel id=\"add_skin\">\r\n            <PanelHeader>Добавить скин</PanelHeader>\r\n          </Panel>\r\n        </View>\r\n        <View id=\"settings\" activePanel=\"settings\">\r\n          <Panel id=\"settings\">\r\n            <PanelHeader>Настройки</PanelHeader>\r\n            <Button onClick={() => this.UpdateTheme()} size=\"xl\" mode=\"secondary\">Сменить тему на альтернативную</Button>\r\n          </Panel>\r\n        </View>\r\n      </Epic>\r\n      </View>\r\n      </ConfigProvider>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}